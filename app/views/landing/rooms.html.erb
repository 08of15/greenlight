<% if current_user %>
  <% page_title = t('greet_user', name: current_user.name) %>
<% else %>
  <% page_title= t('greet_guest', name: @user.username) %>
<% end %>

<% content_for :title do %>
  <div class="title">
    <% if current_user == @user %>
      <%= t('start_new_session') %>
    <% elsif current_user && current_user != @user %>
      <%= t('join_session_user', name: @user.username) %>
    <% else %>
      <%= t('join_session_guest') %>
    <% end %>
  </div>
<% end %>

<div class="page-wrapper rooms" data-room="<%= @user.encrypted_id %>">
  <div class="container-fluid">

    <%= render 'shared/title', title: page_title %>

    <div class="center-panel-wrapper">
      <%= render layout: 'shared/center_panel' do %>
        <div class="center-block col-sm-8">
          <% if current_user == @user %>
            <%= render 'shared/meeting_url', hidden: false %>
          <% else %>
            <%= render 'shared/meeting_url', hidden: true %>
          <% end %>
          <div class="join-form-wrapper">
            <%= render 'shared/join_form' %>
          </div>
        </div>
      <% end %>
    </div>

    <div class="table-wrapper">
      <h3><%= t('past_recordings') %></h3>
      <table id="recordings" class="table" width="100%">
        <thead>
          <th><%= t('date_recorded') %></th>
          <th><%= t('thumbnails') %></th>
          <th><%= t('duration') %></th>
          <th><%= t('views') %></th>
          <th><%= t('actions') %></th>
        </thead>
      </table>
    </div>
  </div>
</div>

<div hidden class="hidden-elements">
  <div class="delete-popover-title">
    <%= t('are_you_sure') %>
  </div>
  <div class="delete-popover-body">
    <button type="button" class="btn btn-danger recording-delete">
      <%= t('yes') %>
    </button>
    <button type="button" class="btn btn-default">
      <%= t('no') %>
    </button>
  </div>
  <div class="alert-template">
    <div class="alert alert-success alert-dismissible fade in" role="alert">
      <button type="button" class="close" data-dismiss="alert" aria-label="Close">
        <span aria-hidden="true">&times;</span>
      </button>
      <span class="alert-message"></span>
    </div>
  </div>
  <div class="publish-alert">
    <%= t('recording_published') %>
  </div>
  <div class="unpublish-alert">
    <%= t('recording_unpublished') %>
  </div>
  <div class="delete-alert">
    <%= t('recording_deleted') %>
  </div>
</div>
